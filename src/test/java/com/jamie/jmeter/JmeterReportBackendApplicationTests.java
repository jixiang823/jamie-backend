package com.jamie.jmeter;

import com.jamie.jmeter.dao.DashboardMapper;
import com.jamie.jmeter.model.JMeterReportModel;
import com.jamie.jmeter.utils.GsonUtil;
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;

import javax.annotation.Resource;
import java.text.SimpleDateFormat;
import java.util.Date;

@SpringBootTest
class JmeterReportBackendApplicationTests {

    @Resource
    private DashboardMapper dashboardMapper;

    @Test
    void contextLoads() {
        String data = "{\"dashboard\":{\"projectStartTime\":1687247771188,\"projectEndTime\":1687247775084,\"caseNum\":5,\"keepFailingNum\":0,\"caseFailNum\":1,\"cassPassRate\":0.8,\"casePassNum\":4,\"projectName\":\"企业微信\",\"env\":\"STG\",\"type\":1,\"newlyFailNum\":1,\"projectDuration\":3},\"testCaseModels\":[{\"caseSteps\":[{\"apiName\":\"a_getToken\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"ok\\\",\\\"access_token\\\":\\\"rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\\\",\\\"expires_in\\\":7200}\",\"apiEndTime\":1687247771568,\"requestMethod\":\"GET\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:11 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 277\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: ok\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247771346,\"requestBody\":\"GET https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=wwd7c03e8731bdd7cc&corpsecret=x_7e8XxklCNakjtqfkgwyPMkYmZNz2VpS-jD5umKHkI\\n\\nGET data:\\n\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=wwd7c03e8731bdd7cc&corpsecret=x_7e8XxklCNakjtqfkgwyPMkYmZNz2VpS-jD5umKHkI\",\"apiDuration\":222,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"}],\"caseInfo\":{\"result\":true,\"caseDuration\":224,\"caseOwner\":\"大吉\",\"caseStartTime\":1687247771345,\"moduleName\":\"部门管理模块\",\"caseName\":\"t_login\",\"caseEndTime\":1687247771569,\"caseStepNum\":1}},{\"caseSteps\":[{\"apiName\":\"a_createDepartment\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"created\\\",\\\"id\\\":2}\",\"apiEndTime\":1687247772010,\"requestMethod\":\"POST\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:12 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 39\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: created\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247771569,\"requestBody\":\"POST https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\\n\\nPOST data:\\n{\\r\\n  \\\"name\\\": \\\"测试仙人\\\",\\r\\n  \\\"name_en\\\": \\\"CSXR\\\",\\r\\n  \\\"parentid\\\": 1,\\r\\n  \\\"order\\\": 1,\\r\\n  \\\"id\\\": 2\\r\\n}\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\",\"apiDuration\":441,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nContent-Length: 97\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"},{\"apiName\":\"a_deleteDepartment\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"deleted\\\"}\",\"apiEndTime\":1687247772418,\"requestMethod\":\"GET\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:12 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 32\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: deleted\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247772011,\"requestBody\":\"GET https://qyapi.weixin.qq.com/cgi-bin/department/delete?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\\n\\nGET data:\\n\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/delete?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\",\"apiDuration\":407,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"}],\"caseInfo\":{\"result\":true,\"caseDuration\":850,\"caseOwner\":\"大吉\",\"caseStartTime\":1687247771569,\"moduleName\":\"部门管理模块\",\"caseName\":\"t_create_department\",\"caseEndTime\":1687247772419,\"caseStepNum\":2}},{\"caseSteps\":[{\"apiName\":\"a_createDepartment\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"created\\\",\\\"id\\\":2}\",\"apiEndTime\":1687247772727,\"requestMethod\":\"POST\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:12 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 39\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: created\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247772419,\"requestBody\":\"POST https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\\n\\nPOST data:\\n{\\r\\n  \\\"name\\\": \\\"测试仙人\\\",\\r\\n  \\\"name_en\\\": \\\"CSXR\\\",\\r\\n  \\\"parentid\\\": 1,\\r\\n  \\\"order\\\": 1,\\r\\n  \\\"id\\\": 2\\r\\n}\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\",\"apiDuration\":308,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nContent-Length: 97\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"},{\"apiName\":\"a_deleteDepartment\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"deleted\\\"}\",\"apiEndTime\":1687247773136,\"requestMethod\":\"GET\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:13 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 32\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: deleted\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247772728,\"requestBody\":\"GET https://qyapi.weixin.qq.com/cgi-bin/department/delete?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\\n\\nGET data:\\n\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/delete?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\",\"apiDuration\":408,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"}],\"caseInfo\":{\"result\":true,\"caseDuration\":717,\"caseOwner\":\"大吉\",\"caseStartTime\":1687247772419,\"moduleName\":\"部门管理模块\",\"caseName\":\"t_delete_department\",\"caseEndTime\":1687247773136,\"caseStepNum\":2}},{\"caseSteps\":[{\"apiName\":\"a_createDepartment\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"created\\\",\\\"id\\\":2}\",\"apiEndTime\":1687247773443,\"requestMethod\":\"POST\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:13 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 39\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: created\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247773137,\"requestBody\":\"POST https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\\n\\nPOST data:\\n{\\r\\n  \\\"name\\\": \\\"测试仙人\\\",\\r\\n  \\\"name_en\\\": \\\"CSXR\\\",\\r\\n  \\\"parentid\\\": 1,\\r\\n  \\\"order\\\": 1,\\r\\n  \\\"id\\\": 2\\r\\n}\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\",\"apiDuration\":306,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nContent-Length: 97\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"},{\"apiName\":\"a_updateDepartment\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"updated\\\"}\",\"apiEndTime\":1687247773852,\"requestMethod\":\"POST\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:13 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 32\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: updated\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247773444,\"requestBody\":\"POST https://qyapi.weixin.qq.com/cgi-bin/department/update?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\\n\\nPOST data:\\n{\\r\\n   \\\"id\\\": 2,\\r\\n   \\\"name\\\": \\\"测试大吉\\\",\\r\\n   \\\"name_en\\\": \\\"CSDJ\\\",\\r\\n   \\\"parentid\\\": 1,\\r\\n   \\\"order\\\": 1\\r\\n}\\r\\n\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/update?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\",\"apiDuration\":408,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nContent-Length: 104\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"},{\"apiName\":\"a_deleteDepartment\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"deleted\\\"}\",\"apiEndTime\":1687247774261,\"requestMethod\":\"GET\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:14 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 32\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: deleted\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247773852,\"requestBody\":\"GET https://qyapi.weixin.qq.com/cgi-bin/department/delete?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\\n\\nGET data:\\n\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/delete?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\",\"apiDuration\":409,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"}],\"caseInfo\":{\"result\":true,\"caseDuration\":1125,\"caseOwner\":\"大吉\",\"caseStartTime\":1687247773137,\"moduleName\":\"部门管理模块\",\"caseName\":\"t_update_department \",\"caseEndTime\":1687247774262,\"caseStepNum\":3}},{\"caseSteps\":[{\"apiName\":\"a_createDepartment\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"created\\\",\\\"id\\\":2}\",\"apiEndTime\":1687247774569,\"requestMethod\":\"POST\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:14 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 39\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: created\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247774262,\"requestBody\":\"POST https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\\n\\nPOST data:\\n{\\r\\n  \\\"name\\\": \\\"测试仙人\\\",\\r\\n  \\\"name_en\\\": \\\"CSXR\\\",\\r\\n  \\\"parentid\\\": 1,\\r\\n  \\\"order\\\": 1,\\r\\n  \\\"id\\\": 2\\r\\n}\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/create?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg\",\"apiDuration\":307,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nContent-Length: 97\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"},{\"apiName\":\"a_listDepartment\",\"responseBody\":\"{\\\"errcode\\\":48009,\\\"errmsg\\\":\\\"api forbidden for contact assistant, hint: [1687247774531332149781214], from ip: 101.228.213.26, more info at https://open.work.weixin.qq.com/devtool/query?e=48009\\\",\\\"department\\\":[]}\",\"apiEndTime\":1687247774672,\"requestMethod\":\"GET\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:14 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 208\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 48009\\nError-Msg: api forbidden for contact assistant, hint: [1687247774531332149781214], from ip: 101.228.213.26, more info at https://open.work.weixin.qq.com/devtool/query?e=48009\\n\",\"responseCode\":\"200\",\"assertMessage\":\"JSON断言: Value expected to match regexp '0', but it did not match: '48009'\\n\",\"result\":false,\"apiStartTime\":1687247774569,\"requestBody\":\"GET https://qyapi.weixin.qq.com/cgi-bin/department/list?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\\n\\nGET data:\\n\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/list?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\",\"apiDuration\":103,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"},{\"apiName\":\"a_deleteDepartment\",\"responseBody\":\"{\\\"errcode\\\":0,\\\"errmsg\\\":\\\"deleted\\\"}\",\"apiEndTime\":1687247775081,\"requestMethod\":\"GET\",\"responseHeader\":\"HTTP/1.1 200 OK\\nDate: Tue, 20 Jun 2023 07:56:15 GMT\\nContent-Type: application/json; charset=UTF-8\\nContent-Length: 32\\nConnection: keep-alive\\nServer: nginx\\nError-Code: 0\\nError-Msg: deleted\\n\",\"responseCode\":\"200\",\"assertMessage\":\"\",\"result\":true,\"apiStartTime\":1687247774673,\"requestBody\":\"GET https://qyapi.weixin.qq.com/cgi-bin/department/delete?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\\n\\nGET data:\\n\\n\\n[no cookies]\\n\",\"requestUrl\":\"https://qyapi.weixin.qq.com/cgi-bin/department/delete?access_token=rY8iTORdMSHT4WWAn2uakQQ0bPaDt2qRNNg1IwlLZAuqpotfXnbp3QF-j5B6a2mqJmF0z3avKC3j_DFY3E7JAVQHDudaOMuyyUjsX-MPOo19N6ZxpKS28VyplSESHstEm0itLKfoYBUDWfnam8pvTXHT8wTkXI9z-PHdnlcnXKpb23gdloN3Nd1F5vEZj7QgX4KT8YM5Zsk-RVhVtTGLtg&id=2\",\"apiDuration\":408,\"requestHeader\":\"Connection: keep-alive\\nContent-Type: application/json\\nHost: qyapi.weixin.qq.com\\nUser-Agent: Apache-HttpClient/4.5.6 (Java/1.8.0_192)\\n\"}],\"caseInfo\":{\"result\":false,\"caseDuration\":820,\"caseOwner\":\"大吉\",\"caseStartTime\":1687247774262,\"moduleName\":\"部门管理模块\",\"caseName\":\"t_list_department \",\"caseEndTime\":1687247775082,\"caseStepNum\":3}}]}";
        JMeterReportModel jMeterReportModel = GsonUtil.jsonToBean(data, JMeterReportModel.class);
        System.out.println(jMeterReportModel.getDashboard());
    }

    @Test
    void batchNo() {
        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyyMMdd");
        String prefix = simpleDateFormat.format(new Date());
        String minBatchNo = prefix + "001";
        String maxBatchNo = dashboardMapper.selectMaxBatchNo();
        // TODO 把查数据库
        if (minBatchNo.equals(maxBatchNo)) {
            System.out.println("插入" + minBatchNo);
        }
        else {
            maxBatchNo = String.valueOf(Long.parseLong(maxBatchNo) + 1);
            System.out.println("插入" + maxBatchNo);
        }


    }

}
